<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SunEditor - Manual Responsive Toolbar</title>
    <link href="https://cdn.jsdelivr.net/npm/suneditor@latest/dist/css/suneditor.min.css" rel="stylesheet">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            font-size: 16px; /* Prevents iOS auto-zoom */
            margin: 0;
            padding: 8px;
            background-color: #f4f4f9;
        }
        .container {
            max-width: 900px;
            margin: 15px auto;
            padding: 15px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .sun-editor {
            border: 1px solid #ddd;
        }
    </style>
</head>
<body>

    <div class="container">
        <h2>SunEditor Demo</h2>
        <p>This editor's toolbar is now controlled by JavaScript to ensure it is compact on mobile devices.</p>
        <textarea id="editor"></textarea>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/suneditor@latest/dist/suneditor.min.js"></script>
    <script>
        // -- DEFINE TOOLBAR LAYOUTS --

        // Full toolbar for desktop view
        const desktopToolbar = [
            ['undo', 'redo'],
            ['font', 'fontSize', 'formatBlock'],
            ['paragraphStyle', 'blockquote'],
            ['bold', 'underline', 'italic', 'strike', 'subscript', 'superscript'],
            ['fontColor', 'hiliteColor', 'textStyle'],
            ['removeFormat'],
            ['outdent', 'indent'],
            ['align', 'horizontalRule', 'list', 'lineHeight'],
            ['table', 'link', 'image', 'video'],
            ['fullScreen', 'showBlocks', 'codeView'],
            ['preview', 'print']
        ];

        // Compact, grouped toolbar for mobile view
        const mobileToolbar = [
            ['undo', 'redo'],
            // Group 1: All text formatting
            [':r-Format-default.more_plus', 'font', 'fontSize', 'formatBlock', 'bold', 'underline', 'italic', 'fontColor', 'hiliteColor', 'removeFormat'],
            // Group 2: All paragraph layout
            [':l-Paragraph-default.more_paragraph', 'paragraphStyle', 'blockquote', 'outdent', 'indent', 'align', 'list', 'lineHeight'],
            // Group 3: All insertables
            [':i-Insert-default.more_plus', 'table', 'link', 'image', 'video', 'horizontalRule'],
            // Group 4: View tools
            ['fullScreen', 'codeView']
        ];

        // -- EDITOR INITIALIZATION --

        // Decide which toolbar to use based on initial screen width
        const isMobile = window.innerWidth < 768;
        
        const editor = SUNEDITOR.create('editor', {
            // Set the initial buttonList based on the isMobile check
            buttonList: isMobile ? mobileToolbar : desktopToolbar,

            width: '100%',
            height: 'auto',
            minHeight: '250px',
            placeholder: 'Start writing here...',
            defaultTag: 'p',
            
            // Callbacks for iOS focus issues
            callBackSave: function () {
                this.core.focus();
            },
            onImageUpload: function () {
                this.core.focus();
            }
        });

        // -- RESPONSIVE LOGIC --

        // Function to switch toolbars
        function setToolbar() {
            if (window.innerWidth < 768) {
                // If it's mobile view, and the current toolbar isn't the mobile one
                if (editor.options.buttonList !== mobileToolbar) {
                    editor.setOptions({ buttonList: mobileToolbar });
                }
            } else {
                // If it's desktop view, and the current toolbar isn't the desktop one
                if (editor.options.buttonList !== desktopToolbar) {
                    editor.setOptions({ buttonList: desktopToolbar });
                }
            }
        }

        // Add a listener to the window resize event
        // 'debounce' prevents the function from firing too rapidly
        let resizeTimeout;
        window.addEventListener('resize', () => {
            clearTimeout(resizeTimeout);
            resizeTimeout = setTimeout(setToolbar, 100);
        });

        // iOS-specific focus fix for selection bug
        if (/iPhone|iPad/i.test(navigator.userAgent)) {
            const wysiwyg = editor.core.context.element.wysiwyg;
            if (wysiwyg) {
                wysiwyg.addEventListener('touchend', (e) => {
                    editor.core.focus();
                });
            }
        }
    </script>

</body>
</html>```