<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SunEditor Mobile-First Toolbar</title>
    <link href="https://cdn.jsdelivr.net/npm/suneditor@latest/dist/css/suneditor.min.css" rel="stylesheet">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            font-size: 16px; /* Prevents iOS auto-zoom on input focus */
            margin: 0;
            padding: 8px;
            background-color: #f4f4f9;
        }
        .container {
            max-width: 900px;
            margin: 15px auto;
            padding: 15px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .sun-editor {
            border: 1px solid #ddd;
        }
    </style>
</head>
<body>

    <div class="container">
        <h2>SunEditor Demo</h2>
        <p>This editor's toolbar is now fully optimized for mobile. It will be compact on phones and expand on desktops.</p>
        <textarea id="editor"></textarea>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/suneditor@latest/dist/suneditor.min.js"></script>
    <script>
        const editor = SUNEDITOR.create('editor', {
            // -- DESKTOP TOOLBAR (DEFAULT) --
            // This full toolbar is shown on screens wider than 768px.
            buttonList: [
                ['undo', 'redo'],
                ['font', 'fontSize', 'formatBlock'],
                ['paragraphStyle', 'blockquote'],
                ['bold', 'underline', 'italic', 'strike', 'subscript', 'superscript'],
                ['fontColor', 'hiliteColor', 'textStyle'],
                ['removeFormat'],
                ['outdent', 'indent'],
                ['align', 'horizontalRule', 'list', 'lineHeight'],
                ['table', 'link', 'image', 'video'],
                ['fullScreen', 'showBlocks', 'codeView'],
                ['preview', 'print']
            ],

            width: '100%',
            height: 'auto',
            minHeight: '250px',
            placeholder: 'Start writing here...',
            defaultTag: 'p',
            
            // Fix for iOS selection and focus issues
            callBackSave: function () {
                this.core.focus();
            },
            onImageUpload: function () {
                this.core.focus();
            },
            
            // -- MOBILE TOOLBAR (PRIMARY RESPONSIVE SETTING) --
            // This compact, grouped toolbar is used for any screen
            // with a width LESS THAN 768px.
            responsiveToolbar: {
                768: [
                    ['undo', 'redo'],
                    // Group 1: Formatting Dropdown
                    [':r-Format-default.more_plus', 'font', 'fontSize', 'formatBlock', 'bold', 'underline', 'italic', 'fontColor', 'hiliteColor', 'removeFormat'],
                    // Group 2: Paragraph Layout Dropdown
                    [':l-Paragraph-default.more_paragraph', 'paragraphStyle', 'blockquote', 'outdent', 'indent', 'align', 'list', 'lineHeight'],
                    // Group 3: Insert Dropdown
                    [':i-Insert-default.more_plus', 'table', 'link', 'image', 'video', 'horizontalRule'],
                    // Group 4: View Tools
                    ['fullScreen', 'codeView']
                ]
            }
        });

        // iOS-specific focus fix for selection bug
        if (/iPhone|iPad/i.test(navigator.userAgent)) {
            editor.core.context.element.wysiwyg.addEventListener('touchend', (e) => {
                editor.core.focus();
            });
        }
    </script>

</body>
</html>