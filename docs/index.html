<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SunEditor Fixed Example</title>
    <link href="https://cdn.jsdelivr.net/npm/suneditor@latest/dist/css/suneditor.min.css" rel="stylesheet">
    <style>
        /* Prevent auto-zooming on iOS by ensuring interactive elements have a sufficient font size. */
        body, textarea {
            font-size: 16px;
        }
        .sun-editor {
            border: 1px solid #ccc;
            border-radius: 8px;
        }
    </style>
</head>
<body>

    <textarea id="editor" style="width: 100%; height: 200px;"></textarea>

    <script src="https://cdn.jsdelivr.net/npm/suneditor@latest/dist/suneditor.min.js"></script>

    <script>
        const editor = SUNEDITOR.create('editor', {
            buttonList: [
                ['undo', 'redo'],
                ['font', 'fontSize', 'formatBlock'],
                ['paragraphStyle', 'blockquote'],
                ['bold', 'underline', 'italic', 'strike', 'subscript', 'superscript'],
                ['fontColor', 'hiliteColor', 'textStyle'],
                ['removeFormat'],
                ['outdent', 'indent'],
                ['align', 'horizontalRule', 'list', 'lineHeight'],
                ['table', 'link', 'image', 'video', 'audio'],
                ['fullScreen', 'showBlocks', 'codeView'],
                ['preview', 'print'],
                ['save', 'template'],
            ],
            mediaAutoSelect: false,
            width: '100%',
            height: 'auto',
            minHeight: '250px',
            placeholder: 'Start typing here...',

            // By default, SunEditor creates a <p> tag when you press enter.
            // This is standard for rich text editors.
            defaultTag: 'p',

            // This option helps in scenarios where focus is lost,
            // which is common on mobile browsers.
            callBackSave: function () {
                this.core.focus();
            },
            
            // Event listener for image uploads to ensure proper placement
            onImageUpload: function () {
                // The editor's internal logic for image placement is generally robust,
                // but ensuring focus is maintained helps prevent errors on iOS.
                this.core.focus();
            },

            // Responsive Toolbar for different screen sizes
            responsiveToolbar: {
                600: [
                    ['undo', 'redo'],
                    ['font', 'fontSize'],
                    ['bold', 'underline', 'italic'],
                    ['fontColor', 'hiliteColor'],
                    ['align', 'list'],
                    ['link', 'image'],
                    ['fullScreen']
                ],
                320: [
                    ['undo', 'redo'],
                    ['bold', 'underline'],
                    ['link']
                ]
            }
        });

        // A workaround for WebKit's selection issues.
        // This ensures that the selection is properly recognized before the editor's command is executed.
        editor.core.context.element.wysiwyg.addEventListener('touchend', function () {
            editor.core.context.element.wysiwyg.focus();
        });

    </script>

</body>
</html>